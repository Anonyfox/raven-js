
import nunjucks from 'nunjucks';
import { generateTemplateData } from '../data.js';

const template = "<!DOCTYPE html>\n<html lang=\"en\" data-theme=\"{{ userPreferences.theme }}\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>{{ site.name }} - Modern Web Development Blog</title>\n  <meta name=\"description\" content=\"{{ site.description }}\">\n  <meta name=\"author\" content=\"{{ site.author }}\">\n  <meta property=\"og:title\" content=\"{{ site.name }}\">\n  <meta property=\"og:description\" content=\"{{ site.description }}\">\n  <meta property=\"og:type\" content=\"website\">\n  <link rel=\"canonical\" href=\"{{ site.url }}\">\n  <link rel=\"stylesheet\" href=\"/css/blog.css\">\n  <script defer src=\"/js/blog-interactions.js\"></script>\n</head>\n<body>\n  <header class=\"site-header\">\n    <div class=\"header-content\">\n      <div class=\"site-branding\">\n        <h1 class=\"site-title\">\n          <a href=\"/\">{{ site.name }}</a>\n        </h1>\n        <p class=\"site-tagline\">{{ site.description }}</p>\n      </div>\n      <nav class=\"main-nav\" role=\"navigation\" aria-label=\"Main navigation\">\n        <ul class=\"nav-list\">\n          {% for item in site.navigation %}\n          <li class=\"nav-item\">\n            <a href=\"{{ item.url }}\" class=\"nav-link {% if item.url == '/' %}active{% endif %}\">\n              {{ item.name }}\n            </a>\n          </li>\n          {% endfor %}\n        </ul>\n      </nav>\n      <div class=\"header-actions\">\n        <button class=\"theme-toggle\" title=\"Toggle dark/light theme\">üåì</button>\n        <button class=\"view-toggle\" title=\"Toggle compact view\">üìã</button>\n      </div>\n    </div>\n  </header>\n\n  <main class=\"main-content\">\n    <div class=\"content-wrapper\">\n      <div class=\"main-column\">\n        <!-- Search and Filters -->\n        <div class=\"search-filters\">\n          <form class=\"search-form\" role=\"search\">\n            <div class=\"search-input-group\">\n              <label for=\"search\" class=\"sr-only\">Search posts</label>\n              <input type=\"search\" id=\"search\" name=\"q\" placeholder=\"Search posts...\"\n                     value=\"{{ searchQuery }}\" class=\"search-input\">\n              <button type=\"submit\" class=\"search-btn\">üîç Search</button>\n            </div>\n          </form>\n          <div class=\"filter-controls\">\n            <select name=\"category\" class=\"filter-select\" title=\"Filter by category\">\n              <option value=\"\">All Categories</option>\n              {% for category in categories %}\n              <option value=\"{{ category }}\" {% if selectedCategory == category %}selected{% endif %}>\n                {{ category }}\n              </option>\n              {% endfor %}\n            </select>\n            <select name=\"sort\" class=\"filter-select\" title=\"Sort posts\">\n              <option value=\"publishedAt\" {% if sortBy == 'publishedAt' %}selected{% endif %}>Latest First</option>\n              <option value=\"views\" {% if sortBy == 'views' %}selected{% endif %}>Most Popular</option>\n              <option value=\"likes\" {% if sortBy == 'likes' %}selected{% endif %}>Most Liked</option>\n            </select>\n          </div>\n        </div>\n\n        <!-- Featured Posts Section -->\n        {% if featuredPosts.length > 0 %}\n        <section class=\"featured-posts\" aria-labelledby=\"featured-heading\">\n          <h2 id=\"featured-heading\">Featured Posts</h2>\n          <div class=\"featured-grid\">\n            {% for post in featuredPosts %}\n            <article class=\"featured-post\">\n              <div class=\"featured-content\">\n                <div class=\"post-badge\">Featured</div>\n                <h3>\n                  <a href=\"/blog/{{ post.slug }}\" class=\"featured-title\">\n                    {{ post.title }}\n                  </a>\n                </h3>\n                <p class=\"featured-excerpt\">{{ post.excerpt }}</p>\n                <div class=\"featured-meta\">\n                  <span class=\"author\">by {{ post.author.name }}</span>\n                  <span class=\"read-time\">{{ post.readTime }} min read</span>\n                  <span class=\"views\">{{ post.views | number }} views</span>\n                </div>\n              </div>\n            </article>\n            {% endfor %}\n          </div>\n        </section>\n        {% endif %}\n\n        <!-- Posts Section -->\n        <section class=\"posts-section\" aria-labelledby=\"posts-heading\">\n          <div class=\"section-header\">\n            <h2 id=\"posts-heading\">\n              {% if selectedCategory %}Posts in {{ selectedCategory }}{% else %}All Posts{% endif %}\n            </h2>\n            <div class=\"posts-count\">{{ posts.length }} posts found</div>\n          </div>\n\n          {% if posts.length > 0 %}\n          <div class=\"posts-grid {% if userPreferences.compactView %}compact{% endif %}\">\n            {% for post in posts %}\n            {% set publishedDate = post.publishedAt %}\n            {% if post.readTime <= 3 %}\n              {% set readTimeCategory = 'quick' %}\n            {% elif post.readTime <= 7 %}\n              {% set readTimeCategory = 'medium' %}\n            {% else %}\n              {% set readTimeCategory = 'long' %}\n            {% endif %}\n\n            <article class=\"post-card {% if post.featured %}featured{% endif %} {% if userPreferences.compactView %}compact{% endif %}\"\n                     data-category=\"{{ post.category }}\"\n                     data-read-time=\"{{ readTimeCategory }}\">\n              <header class=\"post-header\">\n                <div class=\"post-badges\">\n                  {% if post.featured %}\n                  <span class=\"badge featured\">Featured</span>\n                  {% endif %}\n\n                  <span class=\"badge category\">{{ post.category }}</span>\n                </div>\n                <h3 class=\"post-title\">\n                  <a href=\"/blog/{{ post.slug }}\" class=\"post-link\">\n                    {{ post.title }}\n                  </a>\n                </h3>\n                <div class=\"post-meta\">\n                  <div class=\"author-info\">\n                    <img src=\"https://via.placeholder.com/32x32?text=AU\"\n                         alt=\"{{ post.author.name }}\" class=\"author-avatar\" width=\"32\" height=\"32\">\n                    <div class=\"author-details\">\n                      <span class=\"author-name\">{{ post.author.name }}</span>\n                      <span class=\"author-bio\">{{ post.author.bio }}</span>\n                    </div>\n                  </div>\n                  <div class=\"post-timing\">\n                    <time datetime=\"{{ publishedDate | date('iso') }}\"\n                          class=\"publish-date\"\n                          title=\"Published on {{ publishedDate | date }}\">\n                      {{ publishedDate | date }}\n                    </time>\n                    <span class=\"read-time\" title=\"Estimated reading time\">\n                      üìñ {{ post.readTime }} min read\n                    </span>\n                  </div>\n                </div>\n              </header>\n\n              {% if not userPreferences.compactView %}\n              <div class=\"post-content\">\n                <p class=\"post-excerpt\">{{ post.excerpt }}</p>\n                {% if post.content.length > 500 %}\n                <details class=\"content-preview\">\n                  <summary>Read more...</summary>\n                  <div class=\"full-content\">\n                    {% for paragraph in post.content.split('\\\\n\\\\n') %}\n                    <p>{{ paragraph }}</p>\n                    {% endfor %}\n                  </div>\n                </details>\n                {% endif %}\n              </div>\n              {% endif %}\n\n              <div class=\"post-tags\">\n                {% for tag in post.tags %}\n                <a href=\"/blog/tag/{{ tag | urlencode }}\" class=\"tag\">\n                  #{{ tag }}\n                </a>\n                {% endfor %}\n              </div>\n\n              <footer class=\"post-stats\">\n                <div class=\"engagement-stats\">\n                  <span class=\"stat views\" title=\"{{ post.views | number }} views\">\n                    üëÅÔ∏è {% if post.views > 1000 %}{{ (post.views / 1000) | round }}k{% else %}{{ post.views }}{% endif %}\n                  </span>\n                  <span class=\"stat likes\" title=\"{{ post.likes | number }} likes\">\n                    ‚ù§Ô∏è {% if post.likes > 1000 %}{{ (post.likes / 1000) | round }}k{% else %}{{ post.likes }}{% endif %}\n                  </span>\n                  <span class=\"stat comments\" title=\"{{ post.comments | number }} comments\">\n                    üí¨ {{ post.comments }}\n                  </span>\n                </div>\n                <div class=\"post-actions\">\n                  <button class=\"action-btn bookmark\" title=\"Bookmark this post\">\n                    üîñ Save\n                  </button>\n                  <button class=\"action-btn share\" title=\"Share this post\">\n                    üîó Share\n                  </button>\n                </div>\n              </footer>\n            </article>\n            {% endfor %}\n          </div>\n          {% else %}\n          <div class=\"no-posts\">\n            <h3>No posts found</h3>\n            <p>Try adjusting your search or filter criteria to find more posts.</p>\n            <a href=\"/blog\" class=\"reset-filters\">Reset filters</a>\n          </div>\n          {% endif %}\n        </section>\n\n        <!-- Pagination -->\n        {% if posts.length > 0 %}\n        <nav class=\"pagination\" role=\"navigation\" aria-label=\"Pagination\">\n          <div class=\"pagination-info\">\n            <span>Page {{ currentPage }} of {{ totalPages }} ({{ totalPages * 10 }} total posts)</span>\n          </div>\n          <div class=\"pagination-controls\">\n            {% if hasPrevPage %}\n            <a href=\"/blog?page=1\" class=\"page-link first\" aria-label=\"Go to first page\">¬´ First</a>\n            <a href=\"/blog?page={{ currentPage - 1 }}\" class=\"page-link prev\" aria-label=\"Go to previous page\">‚Äπ Previous</a>\n            {% else %}\n            <span class=\"page-link disabled\">¬´ First</span>\n            <span class=\"page-link disabled\">‚Äπ Previous</span>\n            {% endif %}\n\n            {% for i in range(1, totalPages + 1) %}\n            {% if i <= currentPage + 2 and i >= currentPage - 2 %}\n            <a href=\"/blog?page={{ i }}\"\n               class=\"page-link {% if i == currentPage %}current{% endif %}\"\n               {% if i == currentPage %}aria-current=\"page\"{% endif %}>\n              {{ i }}\n            </a>\n            {% endif %}\n            {% endfor %}\n\n            {% if hasNextPage %}\n            <a href=\"/blog?page={{ currentPage + 1 }}\" class=\"page-link next\" aria-label=\"Go to next page\">Next ‚Ä∫</a>\n            <a href=\"/blog?page={{ totalPages }}\" class=\"page-link last\" aria-label=\"Go to last page\">Last ¬ª</a>\n            {% else %}\n            <span class=\"page-link disabled\">Next ‚Ä∫</span>\n            <span class=\"page-link disabled\">Last ¬ª</span>\n            {% endif %}\n          </div>\n        </nav>\n        {% endif %}\n      </div>\n\n      <!-- Sidebar -->\n      <aside class=\"sidebar\">\n        <!-- Analytics Dashboard -->\n        <div class=\"analytics-dashboard\">\n          <h3>Blog Statistics</h3>\n          <div class=\"stats-grid\">\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{ totalPosts | number }}</span>\n              <span class=\"stat-label\">Total Posts</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{ analytics.totalViews | number }}</span>\n              <span class=\"stat-label\">Total Views</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{ analytics.totalLikes | number }}</span>\n              <span class=\"stat-label\">Total Likes</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{ analytics.avgReadTime }} min</span>\n              <span class=\"stat-label\">Avg Read Time</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Category Filter -->\n        <div class=\"category-filter\">\n          <h3>Filter by Category</h3>\n          <ul class=\"category-list\">\n            <li>\n              <a href=\"/blog\" class=\"category-link {% if not selectedCategory %}active{% endif %}\">\n                All Posts\n              </a>\n            </li>\n            {% for category in categories %}\n            <li>\n              <a href=\"/blog?category={{ category | urlencode }}\"\n                 class=\"category-link {% if selectedCategory == category %}active{% endif %}\">\n                {{ category }}\n              </a>\n            </li>\n            {% endfor %}\n          </ul>\n        </div>\n\n        <!-- Popular Tags -->\n        <div class=\"popular-tags\">\n          <h3>Popular Tags</h3>\n          <div class=\"tag-cloud\">\n            {% for tag in popularTags %}\n            {% set fontSize = 1.2 + tag.count * 0.1 %}\n            {% if fontSize > 2 %}\n              {% set fontSize = 2 %}\n            {% endif %}\n            <a href=\"/blog/tag/{{ tag.name | urlencode }}\"\n               class=\"tag-link\"\n               style=\"font-size: {{ fontSize }}rem\"\n               title=\"{{ tag.count }} posts\">\n              #{{ tag.name }}\n              <span class=\"tag-count\">({{ tag.count }})</span>\n            </a>\n            {% endfor %}\n          </div>\n        </div>\n\n        <!-- Recent Activity -->\n        <div class=\"recent-activity\">\n          <h3>Recent Activity</h3>\n          <ul class=\"activity-list\">\n            {% for activity in recentActivity %}\n            <li class=\"activity-item\">\n              <div class=\"activity-content\">\n                <span class=\"activity-type\">{{ activity.type }}</span>\n                <a href=\"/blog/{{ activity.post.slug }}\" class=\"activity-link\">\n                  {{ activity.post.title }}\n                </a>\n                <time class=\"activity-time\">\n                  {{ activity.timestamp | date }}\n                </time>\n              </div>\n            </li>\n            {% endfor %}\n          </ul>\n        </div>\n\n        <!-- Newsletter Signup -->\n        <div class=\"newsletter-signup\">\n          <h3>Stay Updated</h3>\n          <p>Get notified about new posts and updates.</p>\n          <form class=\"newsletter-form\">\n            <input type=\"email\" placeholder=\"your@email.com\" required class=\"newsletter-input\">\n            <button type=\"submit\" class=\"newsletter-btn\">Subscribe</button>\n          </form>\n        </div>\n      </aside>\n    </div>\n  </main>\n\n  <!-- Footer -->\n  <footer class=\"site-footer\">\n    <div class=\"footer-content\">\n      <div class=\"footer-info\">\n        <p>&copy; {{ site.year }} {{ site.name }}. All rights reserved.</p>\n        <p>Built with modern web technologies for optimal performance and accessibility.</p>\n      </div>\n      <div class=\"social-links\">\n        <a href=\"https://twitter.com/{{ site.social.twitter }}\" class=\"social-link twitter\" aria-label=\"Follow us on Twitter\">\n          üê¶ Twitter\n        </a>\n        <a href=\"https://github.com/{{ site.social.github }}\" class=\"social-link github\" aria-label=\"View our GitHub repository\">\n          üêô GitHub\n        </a>\n        <a href=\"https://linkedin.com/{{ site.social.linkedin }}\" class=\"social-link linkedin\" aria-label=\"Connect with us on LinkedIn\">\n          üíº LinkedIn\n        </a>\n      </div>\n      <div class=\"footer-nav\">\n        <a href=\"/privacy\">Privacy Policy</a>\n        <a href=\"/terms\">Terms of Service</a>\n        <a href=\"/contact\">Contact</a>\n        <a href=\"/rss.xml\">RSS Feed</a>\n      </div>\n    </div>\n  </footer>\n\n  <script>\n    // Progressive enhancement for interactivity\n    document.addEventListener('DOMContentLoaded', function() {\n      // Theme toggle functionality\n      const themeToggle = document.querySelector('.theme-toggle');\n      if (themeToggle) {\n        themeToggle.addEventListener('click', () => {\n          const html = document.documentElement;\n          const currentTheme = html.getAttribute('data-theme');\n          html.setAttribute('data-theme', currentTheme === 'dark' ? 'light' : 'dark');\n        });\n      }\n    });\n  </script>\n</body>\n</html>";
const data = generateTemplateData();

// Export render function
export function render() {
  return nunjucks.renderString(template, data);
}

// Ensure it runs
render();
