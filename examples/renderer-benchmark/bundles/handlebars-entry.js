
import Handlebars from 'handlebars';
import { generateTemplateData } from '../data.js';

const template = "<!DOCTYPE html>\n<html lang=\"en\" data-theme=\"{{userPreferences.theme}}\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>{{site.name}} - Modern Web Development Blog</title>\n  <meta name=\"description\" content=\"{{site.description}}\">\n  <meta name=\"author\" content=\"{{site.author}}\">\n  <meta property=\"og:title\" content=\"{{site.name}}\">\n  <meta property=\"og:description\" content=\"{{site.description}}\">\n  <meta property=\"og:type\" content=\"website\">\n  <link rel=\"canonical\" href=\"{{site.url}}\">\n  <link rel=\"stylesheet\" href=\"/css/blog.css\">\n  <script defer src=\"/js/blog-interactions.js\"></script>\n</head>\n<body>\n  <header class=\"site-header\">\n    <div class=\"header-content\">\n      <div class=\"site-branding\">\n        <h1 class=\"site-title\">\n          <a href=\"/\">{{site.name}}</a>\n        </h1>\n        <p class=\"site-tagline\">{{site.description}}</p>\n      </div>\n      <nav class=\"main-nav\" role=\"navigation\" aria-label=\"Main navigation\">\n        <ul class=\"nav-list\">\n          {{#each site.navigation}}\n          <li class=\"nav-item\">\n            <a href=\"{{url}}\" class=\"nav-link {{#ifEquals url '/'}}active{{/ifEquals}}\">\n              {{name}}\n            </a>\n          </li>\n          {{/each}}\n        </ul>\n      </nav>\n      <div class=\"header-actions\">\n        <button class=\"theme-toggle\" title=\"Toggle dark/light theme\">üåì</button>\n        <button class=\"view-toggle\" title=\"Toggle compact view\">üìã</button>\n      </div>\n    </div>\n  </header>\n\n  <main class=\"main-content\">\n    <div class=\"content-wrapper\">\n      <div class=\"main-column\">\n        <!-- Search and Filters -->\n        <div class=\"search-filters\">\n          <form class=\"search-form\" role=\"search\">\n            <div class=\"search-input-group\">\n              <label for=\"search\" class=\"sr-only\">Search posts</label>\n              <input type=\"search\" id=\"search\" name=\"q\" placeholder=\"Search posts...\"\n                     value=\"{{searchQuery}}\" class=\"search-input\">\n              <button type=\"submit\" class=\"search-btn\">üîç Search</button>\n            </div>\n          </form>\n          <div class=\"filter-controls\">\n            <select name=\"category\" class=\"filter-select\" title=\"Filter by category\">\n              <option value=\"\">All Categories</option>\n              {{#each categories}}\n              <option value=\"{{this}}\" {{#ifEquals ../selectedCategory this}}selected{{/ifEquals}}>\n                {{this}}\n              </option>\n              {{/each}}\n            </select>\n            <select name=\"sort\" class=\"filter-select\" title=\"Sort posts\">\n              <option value=\"publishedAt\" {{#ifEquals sortBy 'publishedAt'}}selected{{/ifEquals}}>Latest First</option>\n              <option value=\"views\" {{#ifEquals sortBy 'views'}}selected{{/ifEquals}}>Most Popular</option>\n              <option value=\"likes\" {{#ifEquals sortBy 'likes'}}selected{{/ifEquals}}>Most Liked</option>\n            </select>\n          </div>\n        </div>\n\n        <!-- Featured Posts Section -->\n        {{#if featuredPosts.length}}\n        <section class=\"featured-posts\" aria-labelledby=\"featured-heading\">\n          <h2 id=\"featured-heading\">Featured Posts</h2>\n          <div class=\"featured-grid\">\n            {{#each featuredPosts}}\n            <article class=\"featured-post\">\n              <div class=\"featured-content\">\n                <div class=\"post-badge\">Featured</div>\n                <h3>\n                  <a href=\"/blog/{{slug}}\" class=\"featured-title\">\n                    {{title}}\n                  </a>\n                </h3>\n                <p class=\"featured-excerpt\">{{excerpt}}</p>\n                <div class=\"featured-meta\">\n                  <span class=\"author\">by {{author.name}}</span>\n                  <span class=\"read-time\">{{readTime}} min read</span>\n                  <span class=\"views\">{{formatNumber views}} views</span>\n                </div>\n              </div>\n            </article>\n            {{/each}}\n          </div>\n        </section>\n        {{/if}}\n\n        <!-- Posts Section -->\n        <section class=\"posts-section\" aria-labelledby=\"posts-heading\">\n          <div class=\"section-header\">\n            <h2 id=\"posts-heading\">\n              {{#if selectedCategory}}Posts in {{selectedCategory}}{{else}}All Posts{{/if}}\n            </h2>\n            <div class=\"posts-count\">{{posts.length}} posts found</div>\n          </div>\n\n          {{#if posts.length}}\n          <div class=\"posts-grid {{#if userPreferences.compactView}}compact{{/if}}\">\n            {{#each posts}}\n            {{#with this}}\n            <article class=\"post-card {{#if featured}}featured{{/if}} {{#if ../userPreferences.compactView}}compact{{/if}}\"\n                     data-category=\"{{category}}\"\n                     data-read-time=\"{{#if (lte readTime 3)}}quick{{else}}{{#if (lte readTime 7)}}medium{{else}}long{{/if}}{{/if}}\">\n              <header class=\"post-header\">\n                <div class=\"post-badges\">\n                  {{#if featured}}\n                  <span class=\"badge featured\">Featured</span>\n                  {{/if}}\n                  {{#if (isRecent publishedAt)}}\n                  <span class=\"badge new\">New</span>\n                  {{/if}}\n                  <span class=\"badge category\">{{category}}</span>\n                </div>\n                <h3 class=\"post-title\">\n                  <a href=\"/blog/{{slug}}\" class=\"post-link\">\n                    {{title}}\n                  </a>\n                </h3>\n                <div class=\"post-meta\">\n                  <div class=\"author-info\">\n                    <img src=\"https://via.placeholder.com/32x32?text={{initials author.name}}\"\n                         alt=\"{{author.name}}\" class=\"author-avatar\" width=\"32\" height=\"32\">\n                    <div class=\"author-details\">\n                      <span class=\"author-name\">{{author.name}}</span>\n                      <span class=\"author-bio\">{{author.bio}}</span>\n                    </div>\n                  </div>\n                  <div class=\"post-timing\">\n                    <time datetime=\"{{isoDate publishedAt}}\" class=\"publish-date\"\n                          title=\"Published on {{formatDate publishedAt}}\">\n                      {{formatDate publishedAt}}\n                    </time>\n                    <span class=\"read-time\" title=\"Estimated reading time\">\n                      üìñ {{readTime}} min read\n                    </span>\n                  </div>\n                </div>\n              </header>\n\n              {{#unless ../userPreferences.compactView}}\n              <div class=\"post-content\">\n                <p class=\"post-excerpt\">{{excerpt}}</p>\n                {{#if (gt content.length 500)}}\n                <details class=\"content-preview\">\n                  <summary>Read more...</summary>\n                  <div class=\"full-content\">\n                    {{#each (split content '\\\\n\\\\n')}}\n                    <p>{{this}}</p>\n                    {{/each}}\n                  </div>\n                </details>\n                {{/if}}\n              </div>\n              {{/unless}}\n\n              <div class=\"post-tags\">\n                {{#each tags}}\n                <a href=\"/blog/tag/{{urlEncode this}}\" class=\"tag\">\n                  #{{this}}\n                </a>\n                {{/each}}\n              </div>\n\n              <footer class=\"post-stats\">\n                <div class=\"engagement-stats\">\n                  <span class=\"stat views\" title=\"{{formatNumber views}} views\">\n                    üëÅÔ∏è {{#if (gt views 1000)}}{{formatShort views}}k{{else}}{{views}}{{/if}}\n                  </span>\n                  <span class=\"stat likes\" title=\"{{formatNumber likes}} likes\">\n                    ‚ù§Ô∏è {{#if (gt likes 1000)}}{{formatShort likes}}k{{else}}{{likes}}{{/if}}\n                  </span>\n                  <span class=\"stat comments\" title=\"{{formatNumber comments}} comments\">\n                    üí¨ {{comments}}\n                  </span>\n                </div>\n                <div class=\"post-actions\">\n                  <button class=\"action-btn bookmark\" title=\"Bookmark this post\">\n                    üîñ Save\n                  </button>\n                  <button class=\"action-btn share\" title=\"Share this post\">\n                    üîó Share\n                  </button>\n                </div>\n              </footer>\n            </article>\n            {{/with}}\n            {{/each}}\n          </div>\n          {{else}}\n          <div class=\"no-posts\">\n            <h3>No posts found</h3>\n            <p>Try adjusting your search or filter criteria to find more posts.</p>\n            <a href=\"/blog\" class=\"reset-filters\">Reset filters</a>\n          </div>\n          {{/if}}\n        </section>\n\n        <!-- Pagination -->\n        {{#if posts.length}}\n        <nav class=\"pagination\" role=\"navigation\" aria-label=\"Pagination\">\n          <div class=\"pagination-info\">\n            <span>Page {{currentPage}} of {{totalPages}} ({{multiply totalPages 10}} total posts)</span>\n          </div>\n          <div class=\"pagination-controls\">\n            {{#if hasPrevPage}}\n            <a href=\"/blog?page=1\" class=\"page-link first\" aria-label=\"Go to first page\">¬´ First</a>\n            <a href=\"/blog?page={{subtract currentPage 1}}\" class=\"page-link prev\" aria-label=\"Go to previous page\">‚Äπ Previous</a>\n            {{else}}\n            <span class=\"page-link disabled\">¬´ First</span>\n            <span class=\"page-link disabled\">‚Äπ Previous</span>\n            {{/if}}\n\n            {{#paginationPages currentPage totalPages}}\n            <a href=\"/blog?page={{this}}\"\n               class=\"page-link {{#ifEquals this ../currentPage}}current{{/ifEquals}}\"\n               {{#ifEquals this ../currentPage}}aria-current=\"page\"{{/ifEquals}}>\n              {{this}}\n            </a>\n            {{/paginationPages}}\n\n            {{#if hasNextPage}}\n            <a href=\"/blog?page={{add currentPage 1}}\" class=\"page-link next\" aria-label=\"Go to next page\">Next ‚Ä∫</a>\n            <a href=\"/blog?page={{totalPages}}\" class=\"page-link last\" aria-label=\"Go to last page\">Last ¬ª</a>\n            {{else}}\n            <span class=\"page-link disabled\">Next ‚Ä∫</span>\n            <span class=\"page-link disabled\">Last ¬ª</span>\n            {{/if}}\n          </div>\n        </nav>\n        {{/if}}\n      </div>\n\n      <!-- Sidebar -->\n      <aside class=\"sidebar\">\n        <!-- Analytics Dashboard -->\n        <div class=\"analytics-dashboard\">\n          <h3>Blog Statistics</h3>\n          <div class=\"stats-grid\">\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{formatNumber totalPosts}}</span>\n              <span class=\"stat-label\">Total Posts</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{formatNumber analytics.totalViews}}</span>\n              <span class=\"stat-label\">Total Views</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{formatNumber analytics.totalLikes}}</span>\n              <span class=\"stat-label\">Total Likes</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-number\">{{analytics.avgReadTime}} min</span>\n              <span class=\"stat-label\">Avg Read Time</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Category Filter -->\n        <div class=\"category-filter\">\n          <h3>Filter by Category</h3>\n          <ul class=\"category-list\">\n            <li>\n              <a href=\"/blog\" class=\"category-link {{#unless selectedCategory}}active{{/unless}}\">\n                All Posts\n              </a>\n            </li>\n            {{#each categories}}\n            <li>\n              <a href=\"/blog?category={{urlEncode this}}\"\n                 class=\"category-link {{#ifEquals ../selectedCategory this}}active{{/ifEquals}}\">\n                {{this}}\n              </a>\n            </li>\n            {{/each}}\n          </ul>\n        </div>\n\n        <!-- Popular Tags -->\n        <div class=\"popular-tags\">\n          <h3>Popular Tags</h3>\n          <div class=\"tag-cloud\">\n            {{#each popularTags}}\n            <a href=\"/blog/tag/{{urlEncode name}}\"\n               class=\"tag-link\"\n               style=\"font-size: {{tagSize count}}rem\"\n               title=\"{{count}} posts\">\n              #{{name}}\n              <span class=\"tag-count\">({{count}})</span>\n            </a>\n            {{/each}}\n          </div>\n        </div>\n\n        <!-- Recent Activity -->\n        <div class=\"recent-activity\">\n          <h3>Recent Activity</h3>\n          <ul class=\"activity-list\">\n            {{#each recentActivity}}\n            <li class=\"activity-item\">\n              <div class=\"activity-content\">\n                <span class=\"activity-type\">{{type}}</span>\n                <a href=\"/blog/{{post.slug}}\" class=\"activity-link\">\n                  {{post.title}}\n                </a>\n                <time class=\"activity-time\">\n                  {{formatDate timestamp}}\n                </time>\n              </div>\n            </li>\n            {{/each}}\n          </ul>\n        </div>\n\n        <!-- Newsletter Signup -->\n        <div class=\"newsletter-signup\">\n          <h3>Stay Updated</h3>\n          <p>Get notified about new posts and updates.</p>\n          <form class=\"newsletter-form\">\n            <input type=\"email\" placeholder=\"your@email.com\" required class=\"newsletter-input\">\n            <button type=\"submit\" class=\"newsletter-btn\">Subscribe</button>\n          </form>\n        </div>\n      </aside>\n    </div>\n  </main>\n\n  <!-- Footer -->\n  <footer class=\"site-footer\">\n    <div class=\"footer-content\">\n      <div class=\"footer-info\">\n        <p>&copy; {{site.year}} {{site.name}}. All rights reserved.</p>\n        <p>Built with modern web technologies for optimal performance and accessibility.</p>\n      </div>\n      <div class=\"social-links\">\n        <a href=\"https://twitter.com/{{site.social.twitter}}\" class=\"social-link twitter\" aria-label=\"Follow us on Twitter\">\n          üê¶ Twitter\n        </a>\n        <a href=\"https://github.com/{{site.social.github}}\" class=\"social-link github\" aria-label=\"View our GitHub repository\">\n          üêô GitHub\n        </a>\n        <a href=\"https://linkedin.com/{{site.social.linkedin}}\" class=\"social-link linkedin\" aria-label=\"Connect with us on LinkedIn\">\n          üíº LinkedIn\n        </a>\n      </div>\n      <div class=\"footer-nav\">\n        <a href=\"/privacy\">Privacy Policy</a>\n        <a href=\"/terms\">Terms of Service</a>\n        <a href=\"/contact\">Contact</a>\n        <a href=\"/rss.xml\">RSS Feed</a>\n      </div>\n    </div>\n  </footer>\n\n  <script>\n    // Progressive enhancement for interactivity\n    document.addEventListener('DOMContentLoaded', function() {\n      // Theme toggle functionality\n      const themeToggle = document.querySelector('.theme-toggle');\n      if (themeToggle) {\n        themeToggle.addEventListener('click', () => {\n          const html = document.documentElement;\n          const currentTheme = html.getAttribute('data-theme');\n          html.setAttribute('data-theme', currentTheme === 'dark' ? 'light' : 'dark');\n        });\n      }\n    });\n  </script>\n</body>\n</html>";
const compiled = Handlebars.compile(template);
const data = generateTemplateData();

// Export render function
export function render() {
  return compiled(data);
}

// Ensure it runs
render();
